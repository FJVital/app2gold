<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>app2gold: Your App. Your Success.</title>
    <!-- Inter font and a fallback sans-serif font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS CDN for a clean, modern framework -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for the rocket icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Page load animation */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F7F7F7; /* Your background color */
            animation: fadeInUp 0.8s ease-out;
        }
        h1, h2, h3, .text-bold {
            font-weight: 700; /* Bold */
        }
        h4 {
            font-weight: 500; /* Medium */
        }
        p, li, .text-light {
            font-weight: 300; /* Light */
        }
        .container {
            border: 1px solid #DBDAD7; /* Main container border */
        }
        .text-header-dark {
            color: #5E5A49; /* Your header text color */
        }
        .text-body-dark {
            color: #000000; /* Your body text color */
        }
        .bg-custom-gray {
            background-color: #EDEAEA; /* Your light gray background */
        }
        .btn-primary {
            background-color: #5E5A49; /* Your primary button color */
            color: #FFFFFF; /* Your white text color */
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        .btn-primary:hover {
            background-color: #888578; /* Hover state color */
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(94, 90, 73, 0.3);
        }
        .btn-primary:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(94, 90, 73, 0.2);
        }
        /* No rounded corners, as requested */
        .rounded-none {
            border-radius: 0;
        }
        /* Outline only for input boxes */
        input, textarea {
            border: 1px solid #000000;
            outline: none;
            transition: all 0.3s ease;
        }
        input:focus, textarea:focus {
            outline: 2px solid #5E5A49;
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(94, 90, 73, 0.15);
        }
        input:hover, textarea:hover {
            border-color: #5E5A49;
            box-shadow: 0 2px 8px rgba(94, 90, 73, 0.1);
        }
        
        /* Remove all borders from buttons and links */
        button, a {
            border: none;
            background: none;
        }
        /* Adjusted hr for a thicker look */
        hr {
            border: none;
            height: 2px;
            background-color: #DBDAD7;
        }
        /* Chat agent styles */
        .chat-message {
            max-width: 95%;
            padding: 8px 12px;
            border-radius: 0;
            word-wrap: break-word;
            font-size: 0.875rem;
        }
        
        @media (min-width: 640px) {
            .chat-message {
                max-width: 90%;
                padding: 12px 16px;
                font-size: 1rem;
            }
        }
        .agent-message {
            background-color: #EDEAEA;
            color: #000000;
        }
        .user-message {
            background-color: #5E5A49;
            color: white;
            align-self: flex-end;
        }
        /* Fix for the main heading to be one line on desktop */
        .headline {
            white-space: normal;
        }
        /* Style for the grey header sections */
        .header-section {
            background-color: #EDEAEA;
            color: #5E5A49;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        .header-section:hover {
            background-color: #E8E5E5;
        }
        .header-section h2 {
            margin: 0;
            color: #5E5A49;
            font-size: 1.5rem;
        }
        .header-section p, .header-section li {
            text-align: left;
        }
        .ml-6 {
          margin-left: 1.5rem;
        }
        /* Ensure agent flow is hidden initially */
        .hidden {
            display: none !important;
        }
        
        /* Success message styling */
        .success-banner {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 1rem;
            text-align: center;
            animation: slideDown 0.5s ease-out;
        }
        
        /* Smooth animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .fade-in {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .slide-in {
            animation: slideInFromRight 0.5s ease-out;
        }
        
        .pulse-loading {
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        /* Smooth transitions for sections */
        section {
            transition: all 0.3s ease;
        }
        
        /* Hover effects for testimonials */
        .testimonial-card {
            transition: all 0.2s ease;
            cursor: default;
        }
        
        .testimonial-card:hover {
            transform: translateX(8px);
            background-color: rgba(237, 234, 234, 0.3);
            padding-left: 1.5rem;
        }
        
        /* Custom gold button styling */
        .gold-button {
            transition: all 0.3s ease;
            filter: brightness(1);
        }
        
        .gold-button:hover {
            filter: brightness(1.1) drop-shadow(0 8px 16px rgba(255, 215, 0, 0.3));
            transform: translateY(-2px);
        }
        
        .gold-button:active {
            transform: translateY(0);
            filter: brightness(0.95);
        }
        
        /* Logo hover effect */
        .logo-hover {
            transition: all 0.3s ease;
        }
        
        .logo-hover:hover {
            transform: scale(1.05);
        }
        
        /* Responsive fixes */
        @media (max-width: 640px) {
            .testimonial-card:hover {
                transform: translateX(4px);
                padding-left: 1rem;
            }
            
            .header-section {
                padding: 0.75rem;
            }
            
            .header-section h2 {
                font-size: 1.125rem;
            }
        }
        
        /* Ensure proper spacing on very small screens */
        @media (max-width: 384px) {
            .px-4 {
                padding-left: 0.75rem;
                padding-right: 0.75rem;
            }
        }
    </style>
</head>
<body class="bg-[#F7F7F7] flex items-center justify-center p-4">

    <!-- Success Banner (shown when access=true) -->
    <div id="success-banner" class="fixed top-0 left-0 right-0 z-50 success-banner hidden">
        <div class="flex items-center justify-center space-x-3">
            <i class="fas fa-check-circle text-xl"></i>
            <span class="font-bold">Welcome! Your AI Agent is Ready</span>
        </div>
    </div>

    <main class="w-full max-w-4xl bg-white container mx-auto shadow-xl p-4 sm:p-6 md:p-8 lg:p-12 space-y-6 md:space-y-8 rounded-none">
        
        <!-- Header Section -->
        <header class="text-center space-y-3 md:space-y-4">
            <div class="flex justify-center items-center">
                <!-- Logo for GitHub Pages hosting -->
                <img src="./images/logo_app2gold.jpg" alt="app2gold Logo" class="h-20 sm:h-24 md:h-28 lg:h-32 w-auto logo-hover">
            </div>
            <h1 class="text-2xl sm:text-3xl lg:text-4xl xl:text-5xl font-bold text-header-dark headline leading-tight px-2">
                Your App. Your Success.
            </h1>
            <p class="text-sm sm:text-base md:text-medium text-body-dark max-w-2xl mx-auto font-light px-4">
                You have a brilliant idea for an appâ€”but you're not a developer, and hiring an agency costs thousands. That shouldn't stop you. Whether you already have a concept or just deep expertise in your field, <span class="font-bold">app2gold</span> helps you turn your knowledge into a product that can be monetized, shared, and scaled.
            </p>
            <hr class="border-[#DBDAD7]">
        </header>

        <!-- Landing Page Content (hidden when access=true) -->
        <div id="landing-content">
            <!-- The Problem We Solve -->
            <section class="space-y-3 md:space-y-4">
                <div class="header-section">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold">The Problem We Solve</h2>
                </div>
                <div class="space-y-3 md:space-y-4 font-light text-body-dark text-left p-3 md:p-4">
                    <p class="text-lg sm:text-xl font-bold text-body-dark text-left">Too many great ideas never see the light of day. They stay scribbled on napkins or buried in notebooks. Why?</p>
                    <ul class="list-disc list-inside text-left space-y-1 pl-2">
                        <li>Hiring a developer often starts at $5,000 or moreâ€”out of reach for most.</li>
                        <li>You have valuable experience, but no clear path to turn it into a product.</li>
                        <li>AI tools are powerful, but confusing if you're not tech-savvy.</li>
                    </ul>
                    <p class="text-left"><span class="font-bold">app2gold</span> bridges that gap. We make it simple to build your appâ€”even if you have zero coding or AI experience.</p>
                </div>
                <hr class="border-[#DBDAD7]">
            </section>

            <!-- Your App, Secured and Built -->
            <section class="space-y-3 md:space-y-4">
                <div class="header-section">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold">Your App, Secured and Built</h2>
                </div>
                <div class="space-y-3 md:space-y-4 font-light text-body-dark text-left p-3 md:p-4">
                    <p class="text-lg sm:text-xl font-bold text-body-dark text-left">Building a business is hard enough without worrying about rejection or idea theft. With app2gold:</p>
                    <ul class="list-disc list-inside text-left space-y-1 pl-2">
                        <li>Your intellectual property is protected.</li>
                        <li>You remain the sole creator and owner of your product's blueprint.</li>
                        <li>You get a clear, actionable roadmap to bring your idea to life.</li>
                    </ul>
                </div>
                <hr class="border-[#DBDAD7]">
            </section>

            <!-- Your Path to Launch -->
            <section class="space-y-3 md:space-y-4">
                <div class="header-section">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold">Your Path to Launch</h2>
                </div>
                <div class="space-y-3 md:space-y-4 font-light text-body-dark text-left p-3 md:p-4">
                    <p class="text-lg sm:text-xl font-bold text-body-dark text-left">We've simplified the journey into three powerful steps:</p>
                    <ol class="list-decimal list-inside text-left space-y-2 pl-2">
                        <li><span class="font-bold">Share Your Idea or Expertise</span><br><span class="text-sm sm:text-base">Tell our AI agent about your concept or the domain you know best. No idea yet? No problemâ€”we'll help you discover one based on your strengths.</span></li>
                        <li><span class="font-bold">Receive Your Custom Guide</span><br><span class="text-sm sm:text-base">After a one-time purchase of <span class="font-bold">$99</span>, you'll get a comprehensive, step-by-step business guide tailored to your app. It includes:</span>
                            <ul class="list-disc list-inside ml-4 sm:ml-6 mt-2 space-y-1 text-sm sm:text-base">
                                <li><span class="font-bold">Market Analysis:</span> Understand your target audience and how your app fits into the current landscape.</li>
                                <li><span class="font-bold">Competitive Positioning:</span> Learn who your competitors are and how you can stand out.</li>
                                <li><span class="font-bold">Monetization Strategy:</span> We outline the best ways to generate revenue based on your app's purpose and audience.</li>
                                <li><span class="font-bold">Full Implementation Roadmap:</span> A clear, actionable plan that guides you from concept to launch.</li>
                            </ul>
                        </li>
                        <li><span class="font-bold">Build Your App with AI</span><br><span class="text-sm sm:text-base">Use your guide with any AI tool to start building your appâ€”yourself. No coding required. No agency needed.</span></li>
                    </ol>
                </div>
                <hr class="border-[#DBDAD7]">
            </section>

            <!-- Final call to action -->
            <section class="text-center space-y-3 md:space-y-4">
                <div class="header-section">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold">Don't Let Your Million-Dollar Idea Die</h2>
                </div>
                <div class="px-4">
                    <p class="text-sm sm:text-base md:text-medium text-body-dark font-light max-w-2xl mx-auto">
                        Your idea is valuable. Your expertise is powerful. Stop waiting for someone else to build your dream. With app2gold, you take controlâ€”and create something that lasts.
                    </p>
                    <p class="text-lg sm:text-xl font-bold text-header-dark mt-3 md:mt-4">
                        Start with app2goldâ€”where your app becomes your success.
                    </p>
                </div>
                <hr class="border-[#DBDAD7]">
            </section>
            
            <!-- Testimonials Section -->
            <section id="testimonials" class="space-y-6 md:space-y-8 mt-6 md:mt-8">
                <div class="header-section">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold">What Our Customers Say</h2>
                </div>
                <div class="space-y-3 md:space-y-4 p-3 md:p-4 text-left">
                    <div class="space-y-2 testimonial-card p-2 sm:p-3 rounded-none">
                        <p class="text-body-dark font-light text-sm sm:text-base"><span class="font-bold">Maria, 48</span><br>"I was genuinely scared of AI, thinking it was too complicated for me. But with this program, it was so easy. It felt like I was just having a conversation, and before I knew it, I had a full guide for the app I've always wanted to build. It's truly amazing."</p>
                    </div>
                    <hr class="border-[#DBDAD7]">
                    <div class="space-y-2 testimonial-card p-2 sm:p-3 rounded-none">
                        <p class="text-body-dark font-light text-sm sm:text-base"><span class="font-bold">David, 55</span><br>"After 30 years in my industry, I felt like my knowledge was just sitting in my head. I didn't know how to turn it into a product. app2gold finally gave my expertise a use and a path to monetize it. It's a fantastic tool for anyone with a lifetime of experience."</p>
                    </div>
                    <hr class="border-[#DBDAD7]">
                    <div class="space-y-2 testimonial-card p-2 sm:p-3 rounded-none">
                        <p class="text-body-dark font-light text-sm sm:text-base"><span class="font-bold">Jennifer, 37</span><br>"I had a great idea but was struggling to find an investor, and I was so worried someone would steal my concept. I had no idea I could turn my idea into a real product on a low budget by myself. My app is secure, and I'm in total control of my future. It's the best decision I've ever made."</p>
                    </div>
                    <hr class="border-[#DBDAD7]">
                    <div class="space-y-2 testimonial-card p-2 sm:p-3 rounded-none">
                        <p class="text-body-dark font-light text-sm sm:text-base"><span class="font-bold">Michael, 42</span><br>"I always thought that AI was something only programmers could use. This program completely changed my mind. The whole process was simple and straightforward, guiding me step-by-step. I didn't feel lost or overwhelmed at all."</p>
                    </div>
                    <hr class="border-[#DBDAD7]">
                    <div class="space-y-2 testimonial-card p-2 sm:p-3 rounded-none">
                        <p class="text-body-dark font-light text-sm sm:text-base"><span class="font-bold">Susan, 51</span><br>"I've always believed in my idea, but the fear of a developer costing a fortune kept me from even starting. app2gold made the journey feel possible. It's more than just a guide; it's a blueprint that gave me the confidence to take control and build something that's truly my own."</p>
                    </div>
                </div>
                <hr class="border-[#DBDAD7]">
            </section>

            <!-- Gumroad Purchase Section -->
            <section id="purchase-section" class="space-y-4 md:space-y-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-header-dark text-center px-4">
                    Get Your Complete App Blueprint
                </h2>
                <div class="text-center space-y-4 px-2 md:px-0">
                    <p class="text-sm sm:text-base md:text-medium text-body-dark font-light max-w-2xl mx-auto">
                        Ready to turn your expertise into a profitable app? Get instant access to our AI agent and receive your complete business guide.
                    </p>
                    <div class="bg-custom-gray p-4 md:p-6 rounded-none space-y-3">
                        <h3 class="text-lg sm:text-xl md:text-2xl font-bold text-header-dark">What You Get:</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <ul class="text-left list-disc list-inside space-y-1 text-sm sm:text-base font-light text-body-dark">
                                <li>Personalized AI agent consultation</li>
                                <li>Complete implementation roadmap</li>
                                <li>Lifetime access to your guide</li>
                            </ul>
                            <ul class="text-left list-disc list-inside space-y-1 text-sm sm:text-base font-light text-body-dark">
                                <li>Custom market research for your idea</li>
                                <li>Ready-to-use business blueprint</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Separate Pricing Section -->
                    <div class="text-center py-4 px-6" style="background-color: rgb(247, 247, 247);">
                        <span class="text-2xl sm:text-3xl font-bold" style="color: rgb(51, 153, 102);">Only $99</span><br>
                        <span class="text-sm sm:text-base" style="color: rgb(51, 153, 102);">One-time payment â€¢ Instant access</span>
                    </div>
                    
                    <!-- Benefits List -->
                    <div class="text-left space-y-2 px-4 py-3 text-sm sm:text-base font-light text-body-dark">
                        <p><span class="font-bold">1. Simplicity & Transparency</span> â€“ You pay once, the deal is done. No ongoing billing cycles, interest rates, or hidden fees to track.</p>
                        <p><span class="font-bold">2. Cost Savings</span> â€“ Avoid recurring charges, financing interest, or renewal fees.</p>
                        <p><span class="font-bold">3. Instant Access</span> â€“ Payment is complete upfront, so you can often start using the product or service immediately without waiting for approvals or multiple payments.</p>
                        <p><span class="font-bold">4. No Commitment Anxiety</span> â€“ No risk of forgetting to cancel a subscription or being locked into a long-term contract.</p>
                        <p><span class="font-bold">5. Peace of Mind</span> â€“ You don't have to budget for future payments or worry about price increases.</p>
                        <p><span class="font-bold">6. Fewer Administrative Hassles</span> â€“ No need to update payment methods, handle monthly invoices, or deal with failed payment alerts.</p>
                    </div>
                    
                    <!-- Gumroad Buy Button -->
                    <div class="flex justify-center pt-4">
                        <script src="https://gumroad.com/js/gumroad.js"></script>
                        <a class="gumroad-button border-0" href="https://your-username.gumroad.com/l/app2gold-guide" target="_blank" data-gumroad-single-product="true" style="border: none; background: none; padding: 0;">
                            <img src="./images/turn_my_idea.png" alt="Turn My Idea Into Gold" class="h-12 sm:h-14 md:h-16 w-auto cursor-pointer gold-button" style="border: none; background: none;">
                        </a>
                    </div>
                    
                    <p class="text-sm sm:text-base md:text-lg text-body-dark font-light opacity-75">
                        After purchase, you'll receive an email with access to your personal AI agent.
                    </p>
                </div>
            </section>
        </div>

        <!-- Agent Flow Container - Shown when access=true -->
        <section id="agent-flow-section" class="space-y-4 md:space-y-6 hidden">
            <!-- Welcome Message for Paid Users -->
            <div id="welcome-message" class="text-center space-y-3 md:space-y-4">
                <div class="bg-custom-gray p-4 md:p-6 rounded-none">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-header-dark mb-3">
                        ðŸŽ‰ Welcome to Your Personal AI Agent!
                    </h2>
                    <p class="text-sm sm:text-base text-body-dark font-light">
                        Thank you for your purchase! Your AI agent is ready to help you create a comprehensive business guide for your app idea. Let's get started on turning your expertise into a profitable product.
                    </p>
                </div>
                <hr class="border-[#DBDAD7]">
            </div>

            <!-- Chat Container -->
            <div class="bg-custom-gray p-3 md:p-6 space-y-4 md:space-y-6 overflow-y-auto h-80 sm:h-96 rounded-none" id="chat-container">
                <!-- Agent and user messages will be dynamically appended here -->
            </div>
            
            <!-- Loading Indicator -->
            <div id="loading-indicator" class="text-center hidden">
                <i class="fas fa-spinner fa-spin text-header-dark text-xl sm:text-2xl pulse-loading"></i>
                <p class="mt-2 text-sm sm:text-base md:text-medium text-body-dark pulse-loading">AI Agent is working...</p>
            </div>
            
            <!-- User Input Form -->
            <form id="user-input-form" class="flex flex-col space-y-3 md:space-y-4 hidden">
                <label id="input-label" for="user-input" class="text-sm sm:text-base md:text-medium font-medium text-body-dark">Your Response:</label>
                <textarea id="user-input" class="w-full px-3 md:px-4 py-2 md:py-3 border-black text-body-dark rounded-none text-sm sm:text-base" placeholder="Type your response here..." required rows="3"></textarea>
                <button type="submit" class="w-full py-2 md:py-3 px-3 md:px-4 btn-primary font-bold rounded-none text-sm sm:text-base">
                    Send
                </button>
            </form>
            
            <!-- Final Deliverable Section -->
            <div id="final-deliverable" class="hidden">
                <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-header-dark text-center px-4">Your Product Guide is Ready!</h2>
                <div class="bg-custom-gray p-4 md:p-6 space-y-3 md:space-y-4 rounded-none">
                    <p class="text-sm sm:text-base md:text-medium text-body-dark font-light">Congratulations! Your AI agent has created a detailed, monetizable product guide. Copy the text below and use it with a large language model (like ChatGPT Plus or Claude) to get step-by-step guidance on your project. This document serves as your complete business plan.</p>
                    <textarea readonly class="w-full h-64 sm:h-80 md:h-96 mt-4 p-3 md:p-4 border-black bg-white text-body-dark rounded-none text-xs sm:text-sm" id="final-guide-text"></textarea>
                    <button id="copy-button" class="w-full py-2 md:py-3 px-3 md:px-4 btn-primary font-bold rounded-none text-sm sm:text-base">
                        Copy Guide to Clipboard
                    </button>
                    <div class="text-center mt-4">
                        <p class="text-sm text-body-dark font-light opacity-75">
                            âœ… Your guide is complete! Use this with any AI tool to start building your app.
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Check for access and initialize the appropriate view
        const urlParams = new URLSearchParams(window.location.search);
        const hasAccess = urlParams.get('access') === 'true';
        
        // DOM elements
        const landingContent = document.getElementById('landing-content');
        const agentFlowSection = document.getElementById('agent-flow-section');
        const successBanner = document.getElementById('success-banner');
        const chatContainer = document.getElementById('chat-container');
        const loadingIndicator = document.getElementById('loading-indicator');
        const userInputForm = document.getElementById('user-input-form');
        const userInput = document.getElementById('user-input');
        const inputLabel = document.getElementById('input-label');
        const finalDeliverable = document.getElementById('final-deliverable');
        const copyButton = document.getElementById('copy-button');

        // Agent conversation state
        let userName = '';
        let userEmail = '';
        let currentStep = 0;
        let productIdeas = [];
        const model = "gpt-4o-mini"; // Cost-effective and perfect for this use case

        // Initialize page based on access
        if (hasAccess) {
            // User has access - show agent flow
            landingContent.classList.add('hidden');
            agentFlowSection.classList.remove('hidden');
            successBanner.classList.remove('hidden');
            
            // Auto-hide success banner after 5 seconds
            setTimeout(() => {
                successBanner.classList.add('hidden');
            }, 5000);
            
            // Start the agent conversation
            initializeAgentFlow();
        } else {
            // Regular landing page visitor
            landingContent.classList.remove('hidden');
            agentFlowSection.classList.add('hidden');
        }

        function addMessage(sender, text) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('chat-message', 'mb-4', 'p-4', 'shadow-sm', 'rounded-none', 'slide-in');
            
            const formattedText = text.replace(/^-/gm, '*').replace(/\n\n/g, '<br><br>');
            let content = formattedText;
            
            if (sender === 'agent') {
                messageDiv.classList.add('bg-custom-gray', 'text-body-dark', 'agent-message');
                messageDiv.innerHTML = `<i class="fa-solid fa-robot mr-2"></i><span class="font-bold">AI Agent:</span> ${content}`;
            } else {
                messageDiv.classList.add('bg-[#5E5A49]', 'text-white', 'user-message');
                messageDiv.innerHTML = `<span class="font-bold">You:</span> ${content}`;
            }
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        async function callOpenAIAPI(prompt) {
    loadingIndicator.classList.remove('hidden');
    
    try {
        const response = await fetch('/api/chat', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                prompt: prompt,
                accessCode: 'app2gold-purchased-2025'
            })
        });
        
        if (!response.ok) {
            throw new Error(`Server error: ${response.statusText}`);
        }
        
        const result = await response.json();
        loadingIndicator.classList.add('hidden');
        
        if (result.choices && result.choices.length > 0 && result.choices[0].message) {
            return result.choices[0].message.content;
        } else {
            return "Sorry, I couldn't generate a response. Please try again.";
        }
        
    } catch (error) {
        loadingIndicator.classList.add('hidden');
        console.error("Failed to fetch from API:", error);
        return "An error occurred while connecting to the AI. Please check your internet connection and try again.";
    }
}
        // Main agent flow function
        async function startAgentFlow(userResponse) {
            userInputForm.classList.add('hidden');
            loadingIndicator.classList.remove('hidden');
            
            let agentResponse = '';
            
            switch (currentStep) {
                case 0:
                    // Initial greeting
                    addMessage('agent', `Hello! I'm your dedicated AI agent, ready to help you turn your product idea into a reality.`);
                    await new Promise(res => setTimeout(res, 1500));
                    addMessage('agent', `To get started, please tell me about a field you're an expert in, or share a product idea you're passionate about. This will be the foundation of our work together.`);
                    
                    inputLabel.textContent = "Your Expertise or Idea:";
                    userInput.placeholder = "e.g., 'I'm a fitness trainer' or 'I have an idea for a productivity app'";
                    userInputForm.classList.remove('hidden');
                    userInputForm.classList.add('fade-in');
                    loadingIndicator.classList.add('hidden');
                    currentStep = 1;
                    break;
                    
                case 1:
                    // Process initial input and generate ideas
                    addMessage('user', userResponse);
                    inputLabel.textContent = "Your Choice:";
                    
                    agentResponse = await callOpenAIAPI(`Based on the expertise area or product idea "${userResponse}", generate two unique, non-technical digital product ideas for a beginner to create and monetize. The ideas should not require coding. For each idea, include:
                    1. A clear, compelling name.
                    2. A brief description of the product.
                    3. The target audience.
                    4. The main problem it solves.
                    Format the response clearly with numbered headings for each product idea.`);
                    
                    addMessage('agent', agentResponse);
                    productIdeas = agentResponse;
                    
                    await new Promise(res => setTimeout(res, 1000));
                    addMessage('agent', "Great! Here are two product ideas tailored to your expertise. Please choose the one you'd like to explore further by typing '1' or '2'.");
                    
                    userInput.value = '';
                    userInput.placeholder = "Type 1 or 2...";
                    userInputForm.classList.remove('hidden');
                    userInputForm.classList.add('fade-in');
                    loadingIndicator.classList.add('hidden');
                    currentStep = 2;
                    break;
                    
                case 2:
                    // Process choice and generate final guide
                    addMessage('user', userResponse);
                    const chosenIdeaNumber = parseInt(userResponse);
                    
                    if (chosenIdeaNumber === 1 || chosenIdeaNumber === 2) {
                        let chosenIdea = '';
                        const ideasArray = productIdeas.split('2. ');
                        chosenIdea = (chosenIdeaNumber === 1) ? ideasArray[0] : '2. ' + ideasArray[1];
                        
                        addMessage('agent', `Excellent choice! I'm now creating your comprehensive business guide with market research and implementation roadmap. This will take a moment...`);
                        
                        agentResponse = await callOpenAIAPI(`For this product idea: "${chosenIdea}", conduct a comprehensive market research analysis and create a detailed implementation roadmap. 

Please structure your response as follows:

# Your Complete Product Guide: [Product Name]

## Product Overview
[Brief summary of the chosen product]

## Market Research Analysis
- Target market size and demographics
- Customer pain points and motivations
- Competitive landscape analysis
- Market opportunities and trends
- Pricing strategy recommendations

## Implementation Roadmap
Provide 5 clear, actionable steps for a beginner to build and launch this product:
1. [Step 1 with specific actions]
2. [Step 2 with specific actions]
3. [Step 3 with specific actions]
4. [Step 4 with specific actions]
5. [Step 5 with specific actions]

## Monetization Strategy
- Revenue model recommendations
- Pricing tiers and strategies
- Sales and marketing channels

## Next Steps
- Immediate actions to take
- Resources needed
- Timeline expectations

Make this guide comprehensive, actionable, and beginner-friendly.`);
                        
                        addMessage('agent', `ðŸŽ‰ Perfect! I've created your complete business guide. This comprehensive document includes market research, competitive analysis, and a step-by-step implementation roadmap. You can now copy this guide and use it with any AI tool to start building your product!`);
                        
                        document.getElementById('final-guide-text').value = agentResponse;
                        userInputForm.classList.add('hidden');
                        loadingIndicator.classList.add('hidden');
                        finalDeliverable.classList.remove('hidden');
                        finalDeliverable.classList.add('fade-in');
                        currentStep = 3;
                    } else {
                        addMessage('agent', "That wasn't a valid option. Please type '1' or '2' to choose an idea.");
                        userInputForm.classList.remove('hidden');
                        userInputForm.classList.add('fade-in');
                        loadingIndicator.classList.add('hidden');
                    }
                    break;
            }
        }

        // Event listeners
        userInputForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const userResponse = userInput.value.trim();
            if (userResponse) {
                userInput.value = '';
                startAgentFlow(userResponse);
            }
        });

        copyButton.addEventListener('click', () => {
            const guideText = document.getElementById('final-guide-text');
            guideText.select();
            document.execCommand('copy');
            copyButton.textContent = 'âœ… Copied!';
            copyButton.style.backgroundColor = '#28a745';
            setTimeout(() => {
                copyButton.textContent = 'Copy Guide to Clipboard';
                copyButton.style.backgroundColor = '#5E5A49';
            }, 3000);
        });

        // Demo mode for testing (remove in production)
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            console.log('Demo mode: Add ?access=true to URL to test post-purchase flow');
        }
    </script>
</body>

</html>
